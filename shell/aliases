#!/bin/sh

# File:     aliases
# Created:  30.12.2019
# Author:   Artyom Danilov (@defytheflow)

alias ts='npx tsc'
alias mp='mypy'

# prisma
alias push='npx prisma db push'
alias seed='npx prisma db seed'
alias studio='npx prisma studio'

alias msh='mongosh'
alias rh='runhaskell'

alias sudo='sudo ' # to run 'sudo {alias}'
alias _='sudo'

alias q='exit 0' # without 0, it exits with status code 1, and makes vscode show an error alert.

alias so='source'
alias cls='clear'
alias edit="$EDITOR"
alias grep='grep --color=auto'
alias ssh='TERM=xterm-color ssh' # fix 'tput: unknown terminal bug'
alias xrld='source ~/.xprofile'

case $OSTYPE in
linux*)
  alias open='xdg-open'
  ;;
esac

# history.
alias h='history'
alias history='history -E'

# cd.
alias ..='cd ..'
alias cd..='cd ..'
alias ...='cd ../../'
alias ....=' cd ../../../'
alias .....='cd ../../../../'
alias -- -='cd -' # type '-' to go to previous dir.

# ls.
case $OSTYPE in
darwin*)
  alias ls='ls -vhG'
  ;;
linux*)
  alias ls='ls -vh --group-directories-first --color=auto'
  ;;
esac
alias l='ls -1'
alias la='ls -AF'
alias ll='ls -l'
alias lal='ls -al'
alias sl='ls'

# tree.
alias t='tree'
if command -v tree >/dev/null; then
  alias tree="tree -C -I '.git|__pycache__|node_modules|plugged'"
else
  alias tree="find . -print | sed -e 's;[^/]*/;|____;g;s;____|; |;g'"
fi

# exa.
if command -v exa >/dev/null; then
  # tree.
  alias t='exa -T --git-ignore -I ".git|__pycache__|node_modules|plugged"'
  alias ta='t --all'
  alias tree='t --all'
  # ls.
  alias l='ls --oneline'
  alias ls='exa  --group-directories-first'
  alias ll='ls --long --git'
  alias la='ls --all'
fi

# files.
alias cp='cp -iv'
alias copy='cp'
alias du='du -h'
# alias md='mkdir -pv'
alias mv='mv -iv'
alias move='mv'
alias tc='touch'
# alias rd='rmdir'
alias del='rm'

case $OSTYPE in
darwin*)
  alias rm='rm -vi'
  ;;
linux*)
  alias rm='rm -vi --preserve-root'
  alias rmdir='rmdir -v'
  ;;
esac

# rmtrash.
if command -v rmtrash >/dev/null; then
  alias rm='rmtrash'
  alias rmdir='rmdirtrash'
fi

# bat.
if command -v bat >/dev/null; then
  alias cat='bat'
fi

# sqlite3.
if command -v sqlite3 >/dev/null; then
  alias sql='sqlite3'
  alias sqlite='sqlite3'
fi

# gdb.
if command -v gdb >/dev/null; then
  alias gdb='gdb --quiet'
else
  alias gdb='lldb'
fi

# java.
if command -v java >/dev/null; then
  alias j='java'
  alias jc='javac'
fi

# tmux.
alias tx='tmux'
alias tmux='tmux -f ${XDG_CONFIG_HOME}/tmux/tmux.conf'
if command -v tmuxinator >/dev/null; then
  alias mux='tmuxinator'
fi

# ranger.
if command -v ranger >/dev/null; then
  alias rn='ranger'
fi

# vscode.
alias c='code'
alias c.='code .'

# vim.
alias vi='vim'
alias svim='sudo vim'
alias via='vim ${DOTFILES_HOME}/shell/aliases' # edit aliases.
alias vis='vim ${ZDOTDIR}/.zshrc' # edit zsh config.
if command -v nvim >/dev/null; then
  alias vi='nvim'
  alias vim='nvim'
  alias vie='vim ${XDG_CONFIG_HOME}/nvim/init.vim' # edit nvim config file.
fi

# python.
alias p='python3'
alias py='python3'
alias python='python3'
alias pip='pip3'
if command -v ipython3 >/dev/null; then
  alias ipy='ipython3'
  alias ipython='ipython3'
fi
if command -v ptpython >/dev/null; then
  alias ppy='ptpython'
fi

# homebrew.
if command -v brew >/dev/null; then
  alias bi='brew install'
  alias bu='brew uninstall'
  alias bs='brew services'
  # alias bri='brew reinstall'
  # alias bl='brew list'
fi

# pipenv.
if command -v pipenv >/dev/null; then
  alias pi='pipenv install'
  alias pid='pipenv install --dev'
  alias pu='pipenv uninstall'
  alias psh='pipenv shell'
  alias pt='pytest'
  # pipenv run.
  alias pr='pipenv run'
  alias prc='pipenv run check'
  alias prf='pipenv run fix'
  alias prl='pipenv run lint'
  alias prs='pipenv run start'
  alias prsd='pipenv run start-debug'
  alias prt='pipenv run test'
  alias prtc='pipenv run test --cov=src --cov-report=html'
  alias prtv='pipenv run test --verbose'
  alias prtw='pipenv run ptw'
fi

# npm.
alias n='node'
if command -v npm >/dev/null; then
  alias nx='npx'
  alias ni='npm install'
  alias nid='npm install --save-dev'
  alias nig='npm install --global'
  alias nu='npm uninstall'
  alias nud='npm update'
  alias na='npm audit'
  alias nl='npm link'
  # npm run.
  alias nr='npm run'
  alias nri='npm run ios'
  alias nb='npm run build'
  alias nrb='npm run build'
  alias nrba='npm run build:analyze'
  alias nrd='npm run dev'
  # alias nrdl='npm run dev:local'
  alias nrc='npm run check'
  alias nrf='npm run fix'
  alias nrl='npm run lint'
  alias nrm='npm run make'
  # npm start.
  alias ns='npm start'
  # alias nsl='npm run start:local'
  alias nrs='npm run start'
  # alias nrsl='npm run start:local'
  # npm test.
  alias nt='npm test'
  alias nrt='npm run test'
  alias nrtc='npm run test -- --coverage --coverageDirectory=coverage'
  alias nrtv='npm run test -- --verbose'
  alias nrtw='npm run test -- --watchAll=true'
  alias nrw='npm run watch'
  alias nrr='npm run serve'
fi

# django.
alias dj='django-admin'
alias djch='dj check'
# alias djdb='dj dbshell'
alias djdb='pgcli $(dj sqldsn --quiet --style=uri)'
alias djdm='dj dumpdata'
alias djf='dj flush'
alias djld='dj loaddata'
alias djm='dj migrate'
alias djmm='dj makemigrations'
alias djr='dj runserver'
alias djsa='dj startapp'
alias djsh='dj shell_plus --quiet-load --print-sql --ipython'
# alias djsh='dj shell_plus --quiet-load'
alias djsm='dj showmigrations'
alias djsp='dj startproject'
alias djsql='dj sqlmigrate'
alias djsu='dj createsuperuser'
alias djt='dj test --keepdb --pdb --failfast --noinput -v2'

# opam.
if command -v opam >/dev/null; then
  alias oi='opam install'
fi

# coverage.
if command -v coverage >/dev/null; then
  alias cvrn='coverage run'
  alias cvrp='coverage report | less'
  alias cvht='coverage html'
fi

# httpie.
if command -v http >/dev/null; then
  alias http='http --style=auto --unsorted'
fi

# systemd.
case $OSTYPE in
linux*)
  alias sc='systemctl'
  alias scdr='systemctl daemon-reload'
  alias scr='systemctl restart'
  alias scs='systemctl start'
  alias sce='systemctl stop'
  ;;
esac

#  git.
alias g='git'

# git-add.
alias ga='git add'
alias gaa='git add --all'
alias gap='git add --patch'

# git-branch.
alias gb='git branch'
alias gba='git branch -a'
alias gbd='git branch -d'
alias gbm='git branch -m'

# git-commit.
alias gc='git commit'
alias gcnv='git commit --no-verify'
alias gca='git commit --amend'
alias gcanv='git commit --amend --no-verify'
alias gcane='git commit --amend --no-edit'
alias gcanvne='git commit --amend --no-verify --no-edit'
# alias gcaann='git commit -a --amend --no-edit --no-verify'
# alias gcaa='git commit -a --amend --no-edit'

# git-checkout.
alias gcb='git checkout -b'
alias gco='git checkout'

# git-clone.
alias gcl='git clone'

# git-clean.
alias gclean='git clean -d --force'

# git-diff.
alias gd='git diff'
alias gdn='git diff --numstat'
alias gds='git diff --staged'
alias gdt='git difftool'

gdv() {
  git diff --ignore-all-space "$@" | vim -R -
}

# git-init.
alias gi='git init'

# git-log.
alias gl='git log'
alias glr='git log --reverse'
alias gls='git log --stat'
alias glg='git log --grep'
alias glo='git log --pretty="%C(yellow)%cd %C(cyan)%h%C(auto)%d %Creset%s (%Cblue%aN%Creset)" --graph --date=short --date-order'
# the same as glo, but logs author's email instead of name.
alias gloe='git log --pretty="%C(yellow)%cd %C(cyan)%h%C(auto)%d %Creset%s (%Cblue%aE%Creset)" --graph --date=short --date-order'
# the same as glo, but logs author's name and email.
alias gloa='git log --pretty="%C(yellow)%cd %C(cyan)%h%C(auto)%d %Creset%s (%Cblue%aN %Creset- %Cblue%aE%Creset)" --graph --date=short --date-order'
alias gwc='git whatchanged'
alias gln='git log HEAD@{1}..HEAD@{0}' # show commits since last pull (new commits).
# alias glg='git log --graph'

# git-merge.
alias gm='git merge'

# git-mv.
alias gmv='git mv'

# git-push.
alias gp='git push'
alias gpd='git push --delete'
alias gpnv='git push --no-verify'
alias gpf='git push --force-with-lease'
alias gpfnv='git push --force-with-lease --no-verify'
alias gpu='git push --set-upstream'

# git-pull.
alias gpl='git pull'

# git-remote.
alias gr='git remote -v'
alias gra='git remote add'

# git-rm.
alias grm='git rm'

# git-rebase.
alias grb='git rebase'
alias grbi='git rebase --interactive'
alias grbc='git rebase --continue'

# git-reset.
alias grs='git reset'
alias grsl='git reset HEAD~1'

# git-status.
alias gs='git status'
alias gss='git status --short'

# git-shortlog.
alias gsl='git shortlog --summary --email'
alias gcount='git rev-list --count HEAD' #?

# git-show.
alias gsh='git show'

# git-stash.
alias gst='git stash'
alias gstb='bit stash branch'
alias gstd='git stash drop'
alias gstl='git stash list'
alias gstp='git stash pop'

# gh (github command line client).
if command -v gh >/dev/null; then
  alias ghb='gh browse'
  alias ghrc='gh repo create'
  alias ghrl='gh repo list --limit 100'
  alias ghrlf='gh repo list --limit 100 --fork'
  alias ghrlp='gh repo list --limit 100 --private'
fi

if command -v gh >/dev/null; then
  alias ghst='ghcal -u defytheflow -e $(date "+%Y.%m.%d")'
fi

## amixer.
## alias amixer_toggle='amixer -D pulse set Master 1+ toggle'

## config.
## alias wget='wget --hsts-file=${XDG_CACHE_HOME}/wget-hsts'
